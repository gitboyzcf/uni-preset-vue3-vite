import{E as e,G as t,c as l,a as s,e as a,u as o,o as n,h as c,p as u,g as r,x as i,y as d,j as f,t as h,A as x,F as p,B as b,b as m,z as g,i as y,H as w,I as _}from"./index-Bdg7UkA5.js";import{_ as v}from"./logo.DFXVqlhE.js";const k={__name:"index",setup(k){const z=e(),C=t(),j=l((()=>!!z.token)),T=l((()=>z.userInfo)),q=l((()=>[{icon:"i-carbon-customer-service",text:"联系我们",path:"/contact"},{icon:"i-carbon-settings",text:"系统设置",path:"/settings"}]));function I(){if(j.value)return C.push({path:"/personal"}),!1;C.push({path:"/login"})}function P(){window.open(T.value.url)}function A(){_({title:"提示",content:"确定要退出登录吗?",showCancel:!0,confirmText:"确定",cancelText:"取消",success:function(e){return t=this,l=null,s=function*(){e.confirm?(yield z.logout(),w({title:"退出登录成功",icon:"success"}),setTimeout((()=>{C.replace({path:"/user"})}),500)):e.cancel&&console.log("用户点击取消")},new Promise(((e,a)=>{var o=e=>{try{c(s.next(e))}catch(t){a(t)}},n=e=>{try{c(s.throw(e))}catch(t){a(t)}},c=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,n);c((s=s.apply(t,l)).next())}));var t,l,s}})}return(e,t)=>{const l=u,_=i,k=g,z=y,B=o("layout-default-uni");return n(),s(B,null,{default:a((()=>[c(l,{class:"h-full flex flex-col"},{default:a((()=>[c(l,{class:"relative overflow-hidden"},{default:a((()=>[c(l,{class:"absolute inset-0 bg-blue-500"}),c(l,{class:"absolute h-42 w-42 rounded-full bg-white opacity-10 -right-10 -top-10 z-1"}),c(l,{class:"absolute bottom-0 right-20 h-20 w-20 rounded-full bg-white opacity-10 z-1"}),c(l,{class:"h-[--safe-top]"}),c(l,{class:"relative flex items-center px-6 pb-12 pt-12 bg-blue-500","hover-class":"opacity-90",onClick:I},{default:a((()=>[c(l,{class:"h-18 w-18 overflow-hidden border-2 border-white/30 rounded-full shadow-lg"},{default:a((()=>[c(_,{src:v,alt:"用户头像",class:"h-full w-full"})])),_:1}),c(l,{class:"ml-4 flex-1"},{default:a((()=>[d(j)?(n(),s(l,{key:0,class:"text-xl text-white font-bold"},{default:a((()=>[f(h(d(T).username),1)])),_:1})):(n(),s(l,{key:1,class:"flex items-center"},{default:a((()=>[c(l,{class:"text-xl text-white font-medium"},{default:a((()=>[f(" 立即登录 ")])),_:1}),c(l,{class:"ml-2 rounded-full bg-white/20 px-3 py-1 text-xs text-white"},{default:a((()=>[f(" 未登录 ")])),_:1})])),_:1}))])),_:1}),d(j)?(n(),s(l,{key:0,class:"flex items-center text-white/70"},{default:a((()=>[c(l,null,{default:a((()=>[f("编辑个人资料")])),_:1}),c(l,{class:"i-carbon-chevron-right size-6"})])),_:1})):r("",!0)])),_:1})])),_:1}),c(l,{class:"mx-3 mt-3 overflow-hidden rounded-xl shadow-sm"},{default:a((()=>[(n(!0),x(p,null,b(d(q),((e,t)=>(n(),s(l,{key:t,class:m([[t!==d(q).length-1?"border-b border-gray-100":""],"flex items-center bg-white px-5 py-4 transition-colors duration-200 active:bg-gray-50"]),"hover-class":"bg-gray-50",onClick:t=>function(e){"/settings"!==e.path?C.push({path:e.path,query:e.query||{}}):w({title:"系统设置功能暂未开放",icon:"none"})}(e)},{default:a((()=>[c(l,{class:"w-10 flex flex-none items-center justify-center text-gray-500"},{default:a((()=>[c(l,{class:m(["size-6 text-blue-500",e.icon])},null,8,["class"])])),_:2},1024),c(l,{class:"flex-1 text-gray-700 font-medium"},{default:a((()=>[f(h(e.text),1)])),_:2},1024),c(l,{class:"text-gray-400"},{default:a((()=>[c(l,{class:"i-carbon-chevron-right size-5"})])),_:1})])),_:2},1032,["class","onClick"])))),128))])),_:1}),d(j)?(n(),s(l,{key:0,class:"mb-8 mt-auto px-5"},{default:a((()=>[c(k,{class:"w-full bg-red-500 py-3 text-gray-50 font-medium transition-colors duration-200 !rounded-lg","hover-class":"bg-red-700",onClick:A},{default:a((()=>[f(" 退出登录 ")])),_:1})])),_:1})):(n(),s(l,{key:1,class:"mb-6 mt-auto text-center text-xs text-gray-400"},{default:a((()=>[c(l,null,{default:a((()=>[f(" Supported by "),c(z,{class:"text-blue-500 underline active:text-blue-700",onClick:P},{default:a((()=>[f(h(d(T).name),1)])),_:1}),f(" v"+h("1.0.0"))])),_:1})])),_:1}))])),_:1})])),_:1})}}};export{k as default};
